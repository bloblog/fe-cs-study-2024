> [테코톡 HTTPS](https://www.youtube.com/watch?v=wPdH7lJ8jf0) 를 듣고 정리한 내용입니다

## 목차
- [HTTP](#http)
- [HTTPS](#https)
- [HTTPS가 아닌 HTTP를 사용해야하는 이유](#https가-아닌-http를-사용해야하는-이유)
- [SSL / TLS](#ssl--tls)
- [SSL 통신 과정](#ssl-통신-과정)
- [대칭키](#대칭키)
- [공개키](#공개키)

## HTTP

- Hypertext Tranfer Protocol 의 약자
- 서로 다른 시스템들 사이에서 통신을 주고받게 하는 가장 기본적인 프로토콜
- 서버에서 브라우저로 데이터를 전송하는 용도로 가장 많이 사용함
- 서버에서 브라우저로 전송되는 정보가 암호화되지 않는다는 문제점이 있어서 데이터가 쉽게 도난당할 수 있음


## HTTPS

- Hypertext Tranfer Protocol Secure 의 약자
- HTTP에 **SSL**(보안 소켓 계층)을 사용한 프로토콜
- SSL은 서버와 브라우저 사이에 안전하게 암호화된 연결을 만들 수 있게 도와주고,
- 서버와 브라우저가 민감한 정보를 주고 받을 때 해당 정보가 도난당하는 것을 막아줌
- HTTPS는, HTTP를 사용해서 운반하는 내용, 즉 HTTP Message Body를 암호화함. 이때, HTTP Header는 암호화되지 않음.


## HTTPS가 아닌 HTTP를 사용해야하는 이유

- **보안성**
    - HTTP로 데이터를 전송하면, 네트워크로 전달되는 데이터는 원본 그 자체라서, 해커가 중간에서 가로챈 후, 이 데이터를 보면 해당 데이터에 어떤 내용이 있는지 바로 알 수 있음.
    - HTTP와 달리 HTTPS로 전송할 때는 데이터를 암호화해서 전송해서, 해커가 중간에서 데이터를 가로채도, 데이터는 암호화 되어 있기 때문에 이 데이터가 어떤 내용을 가지고 있는지는 알기 어려움

- **검색 엔진 최적화**
    - 구글은 HTTPS 웹 사이트에 가산점을 부여함. 그래서 HTTP를 사용하는 건 큰 마이너스 요소임
    - AMP를 만들 때 HTTPS 사용해야만 함 (모바일 친화적인 웹 사이트를 만들고, 모바일 검색 순위를 증가시키는 게 점점 더 중요해진 요즘 HTTPS로 전환하는 게 필수적임)
      
        - **AMP**
            - 가속화된 모바일 페이지
            - 모바일 기기에서 컨텐츠를 훨씬 빠르게 로딩하기 위한 방법
            - 구글에서 만듦


## SSL / TLS

- **SSL**
    - Secure Sockets Layer의 약자
    - Netscape Communications Corporation에서 웹 서버와 웹 브라우저간의 보안을 위해 만든 프로토콜
    - 서버와 브라우저간 전송되는 데이터를 외부의 공격자로부터 보안하기 위해 필요
    - 암호화의 대상: 내용이 유출됐을 때 자칫 악용되어 사용될 수 있는 비밀번호나 개인 정보 등
    - SSL 인증서를 무료로 발급해주는 서비스
        - Let’s Encrypt
        - AWS Certificate Manager

- **TLS**
    - SSL의 업그레이드 버전
    - 일반적으로는 두 단어를 동일한 의미로 쓰는 편


## SSL 통신 과정

- SSL은 **공개키** 방식과 **대칭키** 방식을 적절히 **혼합**해서 사용함
- **공개키** 방식으로 **대칭키**를 전달하고, **대칭키**를 활용해서 **암호화와 복호화**를 하고, 서버와 브라우저간 통신을 진행함
    - 데이터 암호화와 복호화를 위한 한 쪽의 **대칭키**를 다른 쪽의 **공개키로 암호화**하여 전송하면,
    - 반대편에서 자신의 **개인 키로 복호화**하여 그 **반대편의 대칭키를 알아내**고,
    - 이 **대칭키를 바탕으로 서로 통신**을 진행함

- 과정 정리
    1. A가 B에게 **접속 요청**을 보냄
    2. B는 A에게 자신의 **공개키**를 전송
    3. A는 자신의 **대칭키**를 B에서 전달받은 B의 **공개키로 암호화 후** B에게 전달
    4. B는 A의 대칭키를 자신의 **개인키로 복호화**하여, ****A의 대칭키를 얻어냄
    5. 이렇게 얻어낸 대칭키를 활용해서 A와 B는 안전하게 통신

- **사용자가 접속한 사이트가 유효한 사이트인지 확인하는 법**
    - <사용자가 사이트 접속하기 전>
        - 사이트는 **사이트 인증서**(인증기관에서 사이트에게 발급하는 문서)가 필요함
        - 이를 위해 [사이트]가 [인증기관]에게 **사이트 정보와 사이트 공개키**를 전달
        - [인증기관]은 전달받은 데이터를 성공적으로 검증 완료 후, 이 데이터를 자신의 **개인키로 서명**하여, **사이트 인증서**를 생성해서 [사이트]에게 전달
        - [인증기관]은 [사용자]에게 자신의 **공개키를 전달**
        - [사용자]는 [인증기관]으로부터 전달받은 인증기관 공개키를 브라우저에 자동으로 내장함

    - <사용자가 사이트 접속 요청했을 때>
        - [사용자]가 [사이트]에 접속 요청
        - [사이트]는 자신이 신뢰할 수 있는 사이트 임을 증명하기 위해 [사용자]에게 자신의 **인증서를 전달**
        - [사용자]는 브라우저에 내장되어 있는 **인증기관 공개키로 사이트 인증서를 복호화하여 검증**
        - 사이트 인증서를 해독하면, **사이트 정보와 사이트 공개키**를 얻을 수 있음
        - 이렇게 얻은 사이트 공개키로, [사용자]는 자신의 **대칭키를 암호화하고,** 암호화한 대칭키를 [사이트]에게 전달
        - [사이트]는 자신의 **개인키로** 사용자로부터 전달받은 **암호문을 해독**하여 **사용자의 대칭키**를 얻음
        - 이제 이렇게 얻은 **대칭키**를 활용하여 [사용자]와 [사이트]는 암호문을 주고받을 수 있게 됨
        - 즉, SSL 통신을 하게 됨

- 결론
    - SSL은 [사이트] 외에 [인증기관]과 [사용자]도 협력하기 때문에 안전한 접속 방법임

## 대칭키

- 동일한 키로 암호화와 복호화를 수행하는 방법
- 그래서 누구든지 암호화에 이용된 키를 가지고 있다면, 해당 데이터를 쉽게 복호화할 수 있음
- **장점**: 암호화와 복호화가 쉬움
- **단점**: 키를 배송할 때 문제가 됨

## **공개키**

- 서로 다른 키로 암호화와 복호화를 수행하는 방법
- **비대칭키** 방식으로도 불림
- 데이터 암호화 시에는 **공개키**를 사용하고, 데이터 복호화 시에는 **개인키**를 사용함
- **공개키**로 암호화한 데이터는 오직 **개인키**로만 복호화할 수 있기 때문에 누구든지 **공개키**를 가져도 문제 없음
- **장점**: 공개키를 무한대로 나눠줘도 괜찮기 때문에 키 배송 문제가 없음
- **단점**: 대칭키 방식보다 암호화 연산 시간이 더 소요되어 비용이 큼
- 대칭키 방식의 장점이 공개키 방식의 단점이 되고, 대칭키 방식의 단점이 공개키 방식의 장점이 됨.
